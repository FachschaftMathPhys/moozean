{{inmail-display model=(readonly model.mail) setTexFile=(action "setPdfFile") setPdfFile=(action "setPdfFile")}}
{{#paper-card as |card|}}
  {{#card.title as |title|}}
    {{#title.text as |text|}}
      {{#text.headline}}Prüfungsbericht erstellen{{/text.headline}}
    {{/title.text}}
  {{/card.title}}
  {{#card.content}}
  {{#paper-autocomplete allowClear=true searchText=(readonly student.name) selected=student search=( action "searchStudent") searchField="name" labelPath="name" placeholder="Studierendes aussuchen" loadingMessage="Suche Studierendes..." noMatchesMessage="Oops Dieses Studierendes existiert nicht. Neues Studierendes eintragen?"
    onSelectionChange=(action (mut student)) as |country autocomplete|}}
    {{paper-autocomplete-highlight
                        label=country.name
                        searchText=autocomplete.searchText
                        flags="i"}} <em>{{country.uniid}}</em>
  {{/paper-autocomplete}}
    {{#paper-autocomplete options=model.subjects allowClear=true searchText=(readonly subjectSearchText) onSearchTextChange=(action (mut subjectSearchText)) selected=model.report.subject searchField="name" labelPath="name" placeholder="Wähle ein Fach" loadingMessage="Suche Fach..."
      noMatchesMessage="Es gibt kein solches Fach" onSelectionChange=(action (mut model.report.subject)) as |subject autocomplete|}}
      {{paper-autocomplete-highlight
        label=subject.name
        searchText=autocomplete.searchText
        flags="i"}}
    {{/paper-autocomplete}}
    {{#paper-autocomplete options=model.typs allowClear=true searchText=(readonly typSearchText) onSearchTextChange=(action (mut typSearchText)) selected=model.report.typ searchField="name" labelPath="name" placeholder="Wähle einen Typ" loadingMessage="Suche Typ..."
      noMatchesMessage="Es gibt kein solchen Typ" onSelectionChange=(action (mut model.report.typ)) as |typ autocomplete|}}
      {{paper-autocomplete-highlight
            label=typ.name
            searchText=autocomplete.searchText
            flags="i"}}
    {{/paper-autocomplete}}
    {{! Prüfende }}
    {{#paper-chips removeItem=(action "removeExaminator") addItem=(action "addExaminator") placeholder="Prüfende hinzufügen" content=model.report.examinators options=model.examinators searchField="surname" requireMatch=true as |item|}}

      <strong>{{item.surname}}</strong>
      {{#if item.givenname}}
        <em>{{item.givenname}}</em>
      {{/if}}
    {{/paper-chips}}
    {{!Module}}
    {{#paper-chips removeItem=(action "removeModul") addItem=(action "addModul") placeholder="Module hinzufügen" content=model.report.moduls options=model.moduls searchField="name" requireMatch=true as |item|}}

      <strong>{{item.name}}</strong>
      {{#if item.abbreviation}}
        <em>{{item.abbreviation}}</em>
      {{/if}}
    {{/paper-chips}}
    {{!Module}}
    {{#paper-chips removeItem=(action "removeFolderseries") addItem=(action "addFolderseries") placeholder="Ordnerreihen hinzufügen" content=model.report.folderseries options=model.folderseries searchField="name" requireMatch=true as |item|}}

      <strong>{{item.name}}</strong>
    {{/paper-chips}}
    {{paper-pikaday label="Prüfungsdatum"
                required=true
                value=(readonly (moment-format model.report.examinationA "MM.YYYY"))
                onSelection=(action (mut model.report.examinationAt))
                onChange=(action (mut someThing)) }}

  {{/card.content}}
  {{#card.actions}}
    {{#paper-button}}
      {{#file-picker preview=false readAs="readAsBinaryString" accept=".tex" fileLoaded="fileLoadedTex" }}
        {{paper-icon "text fields"}} {{filetexName}}
      {{/file-picker}}
    {{/paper-button}}
    {{#paper-button}}
      {{#file-picker preview=false readAs="readAsDataURL" accept=".pdf" fileLoaded="fileLoaded" }}
        {{paper-icon "picture as pdf"}} {{fileName}}
      {{/file-picker}}
    {{/paper-button}}
    {{#paper-button onClick=(action "save")}}
      Speichern
    {{/paper-button}}
  {{/card.actions}}
{{/paper-card}}
{{outlet}}
